import{b as i}from"./chunk-TMNJ3IQ5.js";import{a as l}from"./chunk-OMZRDLFR.js";import{a as h,b as g}from"./chunk-VTQLNZ74.js";import{P as a,U as n,l as p,o as c}from"./chunk-XTZ6SSCZ.js";var f=(()=>{let r=class r{constructor(e){this.http=e}get(e,t){return this.http.get(e,t).pipe()}post(e,t,o){return this.http.post(e,t,o).pipe()}handleError(e){return e.error instanceof ErrorEvent?console.error("An error occurred:",e.error.message):console.error(`Backend returned code ${e.status}, body was: ${e.error}`),p("Something went wrong. Please try again later.")}};r.\u0275fac=function(t){return new(t||r)(n(g))},r.\u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();var j=(()=>{let r=class r{constructor(e,t){this.storageService=e,this.http=t}authenticateUser(e){return this.http.post(i.api.LOGIN,e).pipe(c(t=>t))}getData(){return this.http.get(i.api.GET_USER,{}).pipe(c(e=>(console.log(e),this.storageService.setStorage("streak",e.streak),e)))}refreshToken(){let e=new h().set("Authorization",`Bearer ${this.getRefreshToken()}`);return this.http.post(i.api.REFRESH,{},{headers:e}).pipe(c(t=>{let o=t==null?void 0:t.accessToken;return console.log("nor showing acc token"),console.log(o),this.storageService.setStorage("accessToken",o),!!o}))}createUser(e){return this.http.post("http://localhost:8080/auth/signup",e).pipe(t=>t)}getAccessToken(){return this.storageService.getStorage("accessToken")}getRefreshToken(){return this.storageService.getStorage("refreshToken")}setUser(e){this.storageService.setStorage("accessToken",e.accessToken),this.storageService.setStorage("refreshToken",e.refreshToken),this.storageService.setStorage("user",e)}getGoogleOAuthURL(){let e="https://accounts.google.com/o/oauth2/v2/auth",t={redirect_uri:i.googleOauthRedirectUrl,client_id:i.googleClientId,access_type:"offline",response_type:"code",prompt:"consent",scope:["https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email"].join(" ")},o=new URLSearchParams(t);console.log(`${e}?${o.toString()}`),window.location.href=`${e}?${o.toString()}`}};r.\u0275fac=function(t){return new(t||r)(n(l),n(f))},r.\u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();export{j as a};
