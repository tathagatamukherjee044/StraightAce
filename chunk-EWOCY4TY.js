import{a as V}from"./chunk-4CMWFLKV.js";import{a as x}from"./chunk-IBR6CY5Y.js";import{e as B}from"./chunk-BPGLQ7L2.js";import"./chunk-L2JRJGBN.js";import"./chunk-XY6DTSM3.js";import"./chunk-DGKXG5J6.js";import"./chunk-4PGTP63H.js";import"./chunk-HC6MZPB3.js";import"./chunk-DNNELXDF.js";import"./chunk-B4SXHYET.js";import"./chunk-5U2FUULQ.js";import"./chunk-RJ5GXQEX.js";import"./chunk-CVNAKU4L.js";import"./chunk-MCRJI3T3.js";import"./chunk-5XMCQDZJ.js";import"./chunk-KKJ3U5WP.js";import"./chunk-MM5QLNJM.js";import"./chunk-72ZMTLHO.js";import"./chunk-2EOHHFOF.js";import"./chunk-JXIEZMHN.js";import"./chunk-KGZGLNA4.js";import{c as N}from"./chunk-2DJVFDNR.js";import{$a as E,D as c,H as o,I as i,L as u,U as g,V as a,Va as M,Xa as _,Ya as b,Z as f,Za as w,_a as y,c as T,cb as v,db as q,ea as D,eb as S,fa as A,h as k,i as j,j as I,ja as L,la as G,m as h,n as R,oa as O,v as p,w as d}from"./chunk-A7CW2YMV.js";import"./chunk-4YIWMFFL.js";import"./chunk-G3CV3VGG.js";import"./chunk-4Z3TLU5Y.js";import"./chunk-RSJMK7H2.js";import"./chunk-K3HIOT24.js";import"./chunk-W3SHQOW5.js";import"./chunk-A73CKFRS.js";import"./chunk-4U6PRYVA.js";import"./chunk-T4SUBFUZ.js";import"./chunk-Z4V4M3ZT.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-FQ65QLOX.js";var C=(()=>{let t=class t{constructor(e,n){this.http=e,this.storageService=n}authenticateUser(e){return this.http.post(x.api.LOGIN,e).pipe(T(n=>n))}createUser(e){return this.http.post("http://localhost:8080/auth/signup",e).pipe(n=>n)}getToken(){return this.storageService.getStorage("token")}setUser(e){this.storageService.setStorage("token",e.token),this.storageService.setStorage("user",e)}getGoogleOAuthURL(){let e="https://accounts.google.com/o/oauth2/v2/auth",n={redirect_uri:x.googleOauthRedirectUrl,client_id:x.googleClientId,access_type:"offline",response_type:"code",prompt:"consent",scope:["https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email"].join(" ")},r=new URLSearchParams(n);console.log(`${e}?${r.toString()}`),window.location.href=`${e}?${r.toString()}`}};t.\u0275fac=function(n){return new(n||t)(I(A),I(V))},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let l=t;return l})();var z=(()=>{let t=class t{constructor(e,n){this.authService=e,this.nav=n,this.user={}}onSubmit(){console.log(this.user),this.authService.authenticateUser(this.user).subscribe(e=>{console.log(e),localStorage.setItem("token",e.token),localStorage.setItem("user",e),this.nav.navigateRoot("/quiz")})}goTo(e){this.nav.navigateRoot(e)}loginWithGoogle(){this.authService.getGoogleOAuthURL()}};t.\u0275fac=function(n){return new(n||t)(d(C),d(S))},t.\u0275cmp=h({type:t,selectors:[["app-login"]],standalone:!0,features:[f],decls:26,vars:4,consts:[[3,"ngSubmit"],["sellerForm","ngForm"],[1,"col-12","col-lg-6","col-xl-6","mb-2","d-flex"],[1,"col-8","col-lg-8","col-xl-8","mb-2","d-flex"],["type","text","name","phoneNumber",1,"col-12",3,"ngModel","ngModelChange"],["phoneNumber","ngModel"],[3,"hidden"],["type","text","name","password",1,"col-12",3,"ngModel","ngModelChange"],["password","ngModel"],["type","ngSubmit"],[3,"click"]],template:function(n,r){if(n&1&&(o(0,"p"),a(1,"login works!"),i(),o(2,"form",0,1),u("ngSubmit",function(){return r.onSubmit()}),o(4,"div",2)(5,"label"),a(6,"phoneNumber"),i(),o(7,"div",3)(8,"input",4,5),u("ngModelChange",function(m){return r.user.phoneNumber=m}),i(),o(10,"span",6),a(11," Error "),i()()(),o(12,"div",2)(13,"label"),a(14,"password"),i(),o(15,"div",3)(16,"input",7,8),u("ngModelChange",function(m){return r.user.password=m}),i(),o(18,"span",6),a(19," Error "),i()()(),o(20,"ion-button",9),a(21," Button here"),i()(),o(22,"button",10),u("click",function(){return r.loginWithGoogle()}),a(23,"Login wiht google"),i(),o(24,"a",10),u("click",function(){return r.goTo("/auth/signup")}),a(25,"No Account?"),i()),n&2){let s=g(9),m=g(17);p(8),c("ngModel",r.user.phoneNumber),p(2),c("hidden",s.valid),p(6),c("ngModel",r.user.password),p(2),c("hidden",m.valid)}},dependencies:[v,E,M,_,b,y,w,N]});let l=t;return l})();var H=(()=>{let t=class t{constructor(e,n){this.authService=e,this.nav=n,this.newUser={}}onSubmit(){console.log(this.newUser),console.log(this.newUser),this.authService.createUser(this.newUser).subscribe(e=>{console.log(e)})}goTo(e){this.nav.navigateRoot(e)}};t.\u0275fac=function(n){return new(n||t)(d(C),d(S))},t.\u0275cmp=h({type:t,selectors:[["app-signup"]],standalone:!0,features:[f],decls:32,vars:6,consts:[[3,"ngSubmit"],["sellerForm","ngForm"],[1,"col-12","col-lg-6","col-xl-6","mb-2","d-flex"],[1,"col-8","col-lg-8","col-xl-8","mb-2","d-flex"],["type","text","name","userName",1,"col-12",3,"ngModel","ngModelChange"],["userName","ngModel"],[3,"hidden"],["type","text","name","phone",1,"col-12",3,"ngModel","ngModelChange"],["phone","ngModel"],["type","text","name","password",1,"col-12",3,"ngModel","ngModelChange"],["password","ngModel"],["type","ngSubmit"],[3,"click"]],template:function(n,r){if(n&1&&(o(0,"p"),a(1,"signup works!"),i(),o(2,"form",0,1),u("ngSubmit",function(){return r.onSubmit()}),o(4,"div",2)(5,"label"),a(6,"name"),i(),o(7,"div",3)(8,"input",4,5),u("ngModelChange",function(m){return r.newUser.userName=m}),i(),o(10,"span",6),a(11," Error "),i()()(),o(12,"div",2)(13,"label"),a(14,"phone"),i(),o(15,"div",3)(16,"input",7,8),u("ngModelChange",function(m){return r.newUser.phone=m}),i(),o(18,"span",6),a(19," Error "),i()()(),o(20,"div",2)(21,"label"),a(22,"password"),i(),o(23,"div",3)(24,"input",9,10),u("ngModelChange",function(m){return r.newUser.password=m}),i(),o(26,"span",6),a(27," Error "),i()()(),o(28,"ion-button",11),a(29," Button here"),i()(),o(30,"a",12),u("click",function(){return r.goTo("/auth/login")}),a(31,"Already Have account?"),i()),n&2){let s=g(9),m=g(17),W=g(25);p(8),c("ngModel",r.newUser.userName),p(2),c("hidden",s.valid),p(6),c("ngModel",r.newUser.phone),p(2),c("hidden",m.valid),p(6),c("ngModel",r.newUser.password),p(2),c("hidden",W.valid)}},dependencies:[v,E,M,_,b,y,w,N]});let l=t;return l})();var P=(()=>{let t=class t{constructor(e,n,r,s){this.route=e,this.router=n,this.authService=r,this.nav=s,this.userDataEncoded=null}ngOnInit(){this.route.queryParams.subscribe(e=>{if(e.data){this.userDataEncoded=e.data;let n=JSON.parse(atob(this.userDataEncoded));console.log(n),this.authService.setUser(n),this.nav.navigateRoot("/quiz")}}),console.log()}};t.\u0275fac=function(n){return new(n||t)(d(L),d(G),d(C),d(S))},t.\u0275cmp=h({type:t,selectors:[["app-oauth"]],standalone:!0,features:[f],decls:2,vars:0,template:function(n,r){n&1&&(o(0,"p"),a(1,"Authentication in progress"),i())}});let l=t;return l})();var K=[{path:"signup",component:H},{path:"login",component:z},{path:"oauth",component:P}],he=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=R({type:t}),t.\u0275inj=j({imports:[D,v,O.forChild(K),q,B]});let l=t;return l})();export{he as LoginModule};
