import{a as st,b as at}from"./chunk-5CT7C7R7.js";import{b}from"./chunk-TMNJ3IQ5.js";import{N as I,O as k,Q as v,R as et,T as _,W as it,Z as x,aa as nt,b as W,ba as ot,da as S,ea as rt,i as Z,k as K,o as X,r as Y,v as tt}from"./chunk-VTQLNZ74.js";import{$a as V,Aa as c,Da as D,Ja as R,Jb as U,La as m,N as T,Na as O,Oa as A,P as f,Pa as N,Q as j,Qa as $,Ra as r,Sa as s,Ta as w,U as y,Va as G,X as E,Xa as p,Y as g,Ya as Q,Z as L,aa as F,ba as P,gb as u,hb as H,ib as J,mb as C,o as M,xa as B,za as a}from"./chunk-XTZ6SSCZ.js";import"./chunk-USAIJM6I.js";import"./chunk-NOYVB24C.js";import"./chunk-NTNQTEI6.js";import"./chunk-ID3FNBNJ.js";import"./chunk-GKAPQRIN.js";import"./chunk-CHY2UQSF.js";import"./chunk-4U6PRYVA.js";import"./chunk-HJX2WMCX.js";import"./chunk-Z4V4M3ZT.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{e as q}from"./chunk-BWG4IORI.js";function ft(i,t){if(i&1&&(r(0,"ion-item")(1,"ion-radio",2),u(2),s()()),i&2){let h=t.$implicit;a(),V("name",h),m("value",h),a(),H(h)}}var ct=(()=>{let t=class t{constructor(e,n){this.toastController=e,this.popupService=n,this.loading=!0,this.question=T({}),this.questionChanged=B(()=>{console.log("question has changes"),this.loading=!1,console.log(this.question()),this.answer=""}),this.questionComplete=new D,this.answer=""}ngOnInit(){console.log("init"),console.log(this.question())}checkAnswer(){console.log(this.question()),console.log(this.answer),this.answer==this.question().answer?(console.log("correct"),this.questionComplete.emit(!0),this.popupService.presentToast("Correct")):(console.log("wrong"),this.questionComplete.emit(!1),this.popupService.presentToast("Wrong"))}};t.\u0275fac=function(n){return new(n||t)(c(nt),c(st))},t.\u0275cmp=g({type:t,selectors:[["app-quiz-item"]],inputs:{question:[E.SignalBased,"question"]},outputs:{questionComplete:"questionComplete"},standalone:!0,features:[C],decls:9,vars:2,consts:[[3,"ngModel","ngModelChange"],[3,"click"],[3,"name","value"]],template:function(n,o){if(n&1&&(r(0,"ion-content")(1,"ion-card-content")(2,"h2"),u(3),s(),r(4,"ion-radio-group",0),p("ngModelChange",function(d){return o.answer=d}),N(5,ft,3,3,"ion-item",null,A),s(),r(7,"ion-button",1),p("click",function(){return o.checkAnswer()}),u(8,"Check"),s()()()),n&2){let l,d;a(3),J(" ",(l=o.question())==null?null:l.prompt," "),a(),m("ngModel",o.answer),a(),$((d=o.question())==null?null:d.choices)}},dependencies:[I,tt,X,Y,S,_,rt,v,k]});let i=t;return i})();var mt=(()=>{let t=class t{constructor(e){this.http=e}getQuiz(e,n="all",o){let l=`${b.api.GET_QUIZ}/${e}/${n}/${o}`;return this.http.get(l,{}).pipe(M(d=>d))}quizComplete(){return this.http.post(b.api.QUIZ_COMPLETED,{}).pipe(M(e=>e))}};t.\u0275fac=function(n){return new(n||t)(y(W))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var ut=(()=>{let t=class t{constructor(e){this.modalCtrl=e,this.name=""}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){return this.modalCtrl.dismiss(this.name,"confirm")}};t.\u0275fac=function(n){return new(n||t)(c(x))},t.\u0275cmp=g({type:t,selectors:[["app-info-modal"]],standalone:!0,features:[C],decls:7,vars:1,consts:[[1,"ion-padding"],[1,"justify-center","align-center",2,"font-size","200px"],[1,"justify-center","align-center",3,"strong","click"]],template:function(n,o){n&1&&(r(0,"ion-content",0),u(1," you have completd the quiz "),r(2,"div",1),u(3," \u{1F389} "),s()(),r(4,"ion-footer")(5,"ion-button",2),p("click",function(){return o.confirm()}),u(6,"Confirm"),s()()),n&2&&(a(5),m("strong",!0))},dependencies:[et,v,I]});let i=t;return i})();var pt=(()=>{let t=class t{constructor(e){this.modalCtrl=e}showResultsModal(){return q(this,null,function*(){let e=yield this.modalCtrl.create({component:ut});return e.present(),e})}};t.\u0275fac=function(n){return new(n||t)(y(x))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var dt=(()=>{let t=class t{constructor(){}goBack(){window.history.back()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function vt(i,t){i&1&&(r(0,"ion-card-content")(1,"h1"),w(2,"ion-skeleton-text",2),s(),r(3,"ion-radio-group")(4,"ion-item"),w(5,"ion-skeleton-text",2),s(),r(6,"ion-item"),w(7,"ion-skeleton-text",2),s()(),r(8,"ion-button")(9,"ion-skeleton-text",2),u(10,"Check"),s()()()),i&2&&(a(2),m("animated",!0),a(3),m("animated",!0),a(2),m("animated",!0),a(2),m("animated",!0))}function zt(i,t){if(i&1){let h=G();r(0,"app-quiz-item",3),p("questionComplete",function(n){F(h);let o=Q();return P(o.onQuestionComplete(n))}),s()}if(i&2){let h=Q();m("question",h.currentQuiz)}}var ht=(()=>{let t=class t{constructor(e,n,o,l,d){this.quizService=e,this.router=n,this.modalService=o,this.navigationService=l,this.alertService=d,this.quizList=[],this.mistakeList=[],this.currentQuiz={},this.currentIndex=0,this.evaluated=!1,this.score=0,this.loading=!0}ngOnInit(){this.quizService.getQuiz("school","all","seed").subscribe(e=>{console.log(e),this.quizList=e,console.log(this.quizList),this.currentIndex=0,this.currentQuiz=this.quizList[this.currentIndex],this.loading=!1})}showQuiz(){console.log(this.quizList)}goBack(){this.navigationService.goBack()}onQuestionComplete(e){return q(this,null,function*(){if(console.log(e),e?this.currentQuiz.correct=!0:this.mistakeList.push(JSON.parse(JSON.stringify(this.currentQuiz))),this.currentIndex==this.quizList.length-1){if(this.evaluated||(this.score=this.evaluateResults(this.quizList),this.evaluated=!0),this.mistakeList.length>0){this.quizList=this.mistakeList,this.mistakeList=[],this.currentIndex=0,this.currentQuiz=this.quizList[this.currentIndex],alert("lets go over your mistakes again");return}this.quizComplete(),this.showQuizCompleteModal();return}this.currentIndex++,this.currentQuiz=this.quizList[this.currentIndex],console.log("current quiz"),console.log(this.currentQuiz)})}showQuizCompleteModal(){return q(this,null,function*(){let e=yield this.modalService.showResultsModal(),{data:n,role:o}=yield e.onWillDismiss();console.log(n,o)})}quizComplete(){this.quizService.quizComplete().subscribe(e=>{console.log(e),this.router.navigate(["/"])})}evaluateResults(e=[]){var n=0;return e.forEach(o=>{o.correct&&n++}),console.log(n),n/e.length*100}showLoginAlert(){this.alertService.presentLoginAlert()}};t.\u0275fac=function(n){return new(n||t)(c(mt),c(Z),c(pt),c(dt),c(at))},t.\u0275cmp=g({type:t,selectors:[["app-quiz-page"]],standalone:!0,features:[C],decls:6,vars:1,consts:[["name","arrow-back-outline",2,"margin-top","1em",3,"click"],[3,"click"],[2,"width","80%",3,"animated"],[3,"question","questionComplete"]],template:function(n,o){n&1&&(r(0,"ion-content")(1,"ion-icon",0),p("click",function(){return o.goBack()}),s(),r(2,"ion-button",1),p("click",function(){return o.showLoginAlert()}),u(3," CLICK "),s(),R(4,vt,11,4,"ion-card-content")(5,zt,1,1),s()),n&2&&(a(4),O(4,o.loading?4:5))},dependencies:[v,ct,I,S,_,k,it,ot],styles:[".reelsContainer[_ngcontent-%COMP%]{height:80vh;width:100vw;margin-top:4em;display:flex;overflow:auto;gap:2em;flex-direction:column;scroll-snap-type:y mandatory}.reelsContainer[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.reel[_ngcontent-%COMP%]{max-height:50vh;min-width:100vw;background-color:red;scroll-snap-align:start}"]});let i=t;return i})();var qt=[{path:"",component:ht}],ie=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=L({type:t}),t.\u0275inj=j({imports:[U,K.forChild(qt)]});let i=t;return i})();export{ie as QuizModule};
