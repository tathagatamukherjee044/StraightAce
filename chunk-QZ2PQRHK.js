import{a as ie}from"./chunk-DWQER4H4.js";import{c as v,d as I,e as q,f as z,h as Y,j as ee,m as x,n as te,p as w}from"./chunk-5FNVOWFW.js";import{$ as A,A as O,D as P,F as l,G as R,H as N,I as $,J as D,K as s,L as a,M as g,O as B,P as h,Q as y,T as G,Z as d,_ as V,_a as H,ba as C,bb as W,c as _,f as k,fb as K,h as Q,ha as J,hb as X,i as M,j as E,ja as U,l as T,m as f,n as L,p as b,q as j,ra as Z,w as F,x as r,y as m}from"./chunk-FS3NAXD3.js";import"./chunk-OW7EQKNB.js";import"./chunk-G3CV3VGG.js";import"./chunk-ESOUP7AG.js";import"./chunk-5M4KFUAY.js";import"./chunk-TVFT7PDL.js";import"./chunk-W3SHQOW5.js";import"./chunk-A73CKFRS.js";import"./chunk-4U6PRYVA.js";import"./chunk-HJX2WMCX.js";import"./chunk-Z4V4M3ZT.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-FQ65QLOX.js";function ae(n,e){if(n&1&&(s(0,"ion-item")(1,"ion-radio",2),d(2),a()()),n&2){let u=e.$implicit;r(),G("name",u),l("value",u),r(),V(u)}}var ne=(()=>{let e=class e{constructor(t,i){this.toastController=t,this.popupService=i,this.loading=!0,this.question=k({}),this.questionChanged=F(()=>{console.log("question has changes"),this.loading=!1,console.log(this.question()),this.answer=""}),this.questionComplete=new O,this.answer=""}ngOnInit(){console.log("init"),console.log(this.question())}checkAnswer(){console.log(this.question()),console.log(this.answer),this.answer==this.question().answer?(console.log("correct"),this.questionComplete.emit(!0),this.popupService.presentToast("Correct")):(console.log("wrong"),this.questionComplete.emit(!1),this.popupService.presentToast("Wrong"))}};e.\u0275fac=function(i){return new(i||e)(m(ee),m(ie))},e.\u0275cmp=f({type:e,selectors:[["app-quiz-item"]],inputs:{question:[T.SignalBased,"question"]},outputs:{questionComplete:"questionComplete"},standalone:!0,features:[C],decls:9,vars:2,consts:[[3,"ngModel","ngModelChange"],[3,"click"],[3,"name","value"]],template:function(i,o){if(i&1&&(s(0,"ion-content")(1,"ion-card-content")(2,"h2"),d(3),a(),s(4,"ion-radio-group",0),h("ngModelChange",function(p){return o.answer=p}),$(5,ae,3,3,"ion-item",null,N),a(),s(7,"ion-button",1),h("click",function(){return o.checkAnswer()}),d(8,"Check"),a()()()),i&2){let c,p;r(3),A(" ",(c=o.question())==null?null:c.prompt," "),r(),l("ngModel",o.answer),r(),D((p=o.question())==null?null:p.choices)}},dependencies:[v,K,H,W,x,z,te,q,I]});let n=e;return n})();var oe=(()=>{let e=class e{constructor(t){this.http=t}getQuiz(t,i="all",o){let c=`${w.api.GET_QUIZ}/${t}/${i}/${o}`;return this.http.get(c,{}).pipe(_(p=>p))}quizComplete(){return this.http.post(w.api.QUIZ_COMPLETED,{}).pipe(_(t=>t))}};e.\u0275fac=function(i){return new(i||e)(E(U))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function ue(n,e){n&1&&(s(0,"ion-card-content")(1,"h1"),g(2,"ion-skeleton-text",1),a(),s(3,"ion-radio-group")(4,"ion-item"),g(5,"ion-skeleton-text",1),a(),s(6,"ion-item"),g(7,"ion-skeleton-text",1),a()(),s(8,"ion-button")(9,"ion-skeleton-text",1),d(10,"Check"),a()()()),n&2&&(r(2),l("animated",!0),r(3),l("animated",!0),r(2),l("animated",!0),r(2),l("animated",!0))}function ce(n,e){if(n&1){let u=B();s(0,"app-quiz-item",2),h("questionComplete",function(i){b(u);let o=y();return j(o.onQuestionComplete(i))}),a()}if(n&2){let u=y();l("question",u.currentQuiz)}}var re=(()=>{let e=class e{constructor(t,i){this.quizService=t,this.nav=i,this.quizList=[],this.mistakeList=[],this.currentQuiz={},this.currentIndex=0,this.evaluated=!1,this.score=0,this.loading=!0}ngOnInit(){this.quizService.getQuiz("school","all","seed").subscribe(t=>{console.log(t),this.quizList=t,console.log(this.quizList),this.currentIndex=0,this.currentQuiz=this.quizList[this.currentIndex],this.loading=!1})}showQuiz(){console.log(this.quizList)}onQuestionComplete(t){if(console.log(t),t?this.currentQuiz.correct=!0:this.mistakeList.push(JSON.parse(JSON.stringify(this.currentQuiz))),this.currentIndex==this.quizList.length-1){if(this.evaluated||(this.score=this.evaluateResults(this.quizList),this.evaluated=!0),this.mistakeList.length>0){this.quizList=this.mistakeList,this.mistakeList=[],this.currentIndex=0,this.currentQuiz=this.quizList[this.currentIndex],alert("lets go over your mistakes again");return}this.quizComplete(),alert(`all question scomplete ${this.score}`);return}this.currentIndex++,this.currentQuiz=this.quizList[this.currentIndex],console.log("current quiz"),console.log(this.currentQuiz)}quizComplete(){this.quizService.quizComplete().subscribe(t=>{console.log(t),this.nav.navigateRoot("/")})}evaluateResults(t=[]){var i=0;return t.forEach(o=>{o.correct&&i++}),console.log(i),i/t.length*100}};e.\u0275fac=function(i){return new(i||e)(m(oe),m(X))},e.\u0275cmp=f({type:e,selectors:[["app-quiz-page"]],standalone:!0,features:[C],decls:3,vars:1,consts:[[1,"reelsContainer"],[2,"width","80%",3,"animated"],[1,"reel",3,"question","questionComplete"]],template:function(i,o){i&1&&(s(0,"ion-content",0),P(1,ue,11,4,"ion-card-content")(2,ce,1,1),a()),i&2&&(r(),R(1,o.loading?1:2))},dependencies:[q,ne,v,x,z,I,Y],styles:[".reelsContainer[_ngcontent-%COMP%]{height:80vh;width:100vw;margin-top:4em;display:flex;overflow:auto;gap:2em;flex-direction:column;scroll-snap-type:y mandatory}.reelsContainer[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.reel[_ngcontent-%COMP%]{max-height:50vh;min-width:100vw;background-color:red;scroll-snap-align:start}"]});let n=e;return n})();var pe=[{path:"",component:re}],be=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=L({type:e}),e.\u0275inj=M({imports:[J,Z.forChild(pe)]});let n=e;return n})();export{be as QuizModule};
