import{a as q}from"./chunk-IBR6CY5Y.js";import{a as H}from"./chunk-2BH7OXQR.js";import{c as B,d as A,e as g,g as G,j as J,k as U,l as Z}from"./chunk-2DJVFDNR.js";import{D as p,E as x,F as L,G as T,H as a,I as u,L as m,P as b,V as d,W as E,X as j,Xa as P,Z as f,_a as R,c as v,cb as $,ea as F,eb as D,f as z,fa as O,h as y,i as w,j as _,l as Q,m as h,n as S,oa as N,u as M,v as s,w as c,y as k}from"./chunk-A7CW2YMV.js";import"./chunk-4YIWMFFL.js";import"./chunk-G3CV3VGG.js";import"./chunk-4Z3TLU5Y.js";import"./chunk-RSJMK7H2.js";import"./chunk-K3HIOT24.js";import"./chunk-W3SHQOW5.js";import"./chunk-A73CKFRS.js";import"./chunk-4U6PRYVA.js";import"./chunk-T4SUBFUZ.js";import"./chunk-Z4V4M3ZT.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-FQ65QLOX.js";function Y(o,e){if(o&1&&(a(0,"ion-item")(1,"ion-radio",2),d(2),u()()),o&2){let C=e.$implicit;s(),b("name",C),p("value",C),s(),E(C)}}var W=(()=>{let e=class e{constructor(t,i){this.toastController=t,this.popupService=i,this.question=z({}),this.questionChanged=M(()=>{console.log("question has changes"),console.log(this.question()),this.answer=""}),this.questionComplete=new k,this.answer=""}ngOnInit(){console.log("init"),console.log(this.question())}checkAnswer(){console.log(this.question()),console.log(this.answer),this.answer==this.question().answer?(console.log("correct"),this.questionComplete.emit(!0),this.popupService.presentToast("Correct")):(console.log("wrong"),this.questionComplete.emit(!1),this.popupService.presentToast("Wrong"))}};e.\u0275fac=function(i){return new(i||e)(c(J),c(H))},e.\u0275cmp=h({type:e,selectors:[["app-quiz-item"]],inputs:{question:[Q.SignalBased,"question"]},outputs:{questionComplete:"questionComplete"},standalone:!0,features:[f],decls:9,vars:2,consts:[[3,"ngModel","ngModelChange"],[3,"click"],[3,"name","value"]],template:function(i,n){if(i&1&&(a(0,"ion-content")(1,"ion-card-content")(2,"h2"),d(3),u(),a(4,"ion-radio-group",0),m("ngModelChange",function(r){return n.answer=r}),L(5,Y,3,3,"ion-item",null,x),u(),a(7,"ion-button",1),m("click",function(){return n.checkAnswer()}),d(8,"Check"),u()()()),i&2){let l,r;s(3),j(" ",(l=n.question())==null?null:l.prompt," "),s(),p("ngModel",n.answer),s(),T((r=n.question())==null?null:r.choices)}},dependencies:[B,$,P,R,U,G,Z,g,A]});let o=e;return o})();var K=(()=>{let e=class e{constructor(t){this.http=t}getQuiz(t,i="all",n){let l=`${q.api.GET_QUIZ}/${t}/${i}/${n}`;return this.http.get(l,{}).pipe(v(r=>r))}quizComplete(){return this.http.post(q.api.QUIZ_COMPLETED,{}).pipe(v(t=>t))}};e.\u0275fac=function(i){return new(i||e)(_(O))},e.\u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();var V=(()=>{let e=class e{constructor(t,i){this.quizService=t,this.nav=i,this.quizList=[],this.mistakeList=[],this.currentQuiz={},this.currentIndex=0,this.evaluated=!1,this.score=0}ngOnInit(){this.quizService.getQuiz("school","all","seed").subscribe(t=>{console.log(t),this.quizList=t,console.log(this.quizList),this.currentIndex=0,this.currentQuiz=this.quizList[this.currentIndex]})}showQuiz(){console.log(this.quizList)}onQuestionComplete(t){if(console.log(t),t?this.currentQuiz.correct=!0:this.mistakeList.push(JSON.parse(JSON.stringify(this.currentQuiz))),this.currentIndex==this.quizList.length-1){if(this.evaluated||(this.score=this.evaluateResults(this.quizList),this.evaluated=!0),this.mistakeList.length>0){this.quizList=this.mistakeList,this.mistakeList=[],this.currentIndex=0,this.currentQuiz=this.quizList[this.currentIndex],alert("lets go over your mistakes again");return}this.quizComplete(),alert(`all question scomplete ${this.score}`);return}this.currentIndex++,this.currentQuiz=this.quizList[this.currentIndex],console.log("current quiz"),console.log(this.currentQuiz)}quizComplete(){this.quizService.quizComplete().subscribe(t=>{console.log(t),this.nav.navigateRoot("/")})}evaluateResults(t=[]){var i=0;return t.forEach(n=>{n.correct&&i++}),console.log(i),i/t.length*100}};e.\u0275fac=function(i){return new(i||e)(c(K),c(D))},e.\u0275cmp=h({type:e,selectors:[["app-quiz-page"]],standalone:!0,features:[f],decls:2,vars:1,consts:[[1,"reelsContainer"],[1,"reel",3,"question","questionComplete"]],template:function(i,n){i&1&&(a(0,"ion-content",0)(1,"app-quiz-item",1),m("questionComplete",function(r){return n.onQuestionComplete(r)}),u()()),i&2&&(s(),p("question",n.currentQuiz))},dependencies:[g,W],styles:[".reelsContainer[_ngcontent-%COMP%]{height:80vh;width:100vw;margin-top:4em;display:flex;overflow:auto;gap:2em;flex-direction:column;scroll-snap-type:y mandatory}.reelsContainer[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.reel[_ngcontent-%COMP%]{max-height:50vh;min-width:100vw;background-color:red;scroll-snap-align:start}"]});let o=e;return o})();var te=[{path:"",component:V}],Ie=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=S({type:e}),e.\u0275inj=w({imports:[F,N.forChild(te)]});let o=e;return o})();export{Ie as QuizModule};
